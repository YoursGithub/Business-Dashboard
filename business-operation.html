<!DOCTYPE html>
<html>
<head>
    <title>Business Operation</title>
    <link href="assets/css/bootstrap.min.css" id="bootstrap-style" rel="stylesheet" type="text/css" />
    <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/simplebar/5.3.6/simplebar.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="assets/css/app.min.css" id="app-style" rel="stylesheet" type="text/css" />
    <script src="assets/js/plugin.js"></script>
    <style>
         * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: system-ui, -apple-system, sans-serif;
            line-height: 1.6;
            background-color: rgb(236, 230, 230);
        }

        .poppins-regular {
        font-family: "Poppins", sans-serif;
  font-weight: 400;
  font-style: normal;
}

.navbar-brand-box {
            background-color: #2a3042;
            padding: 0 1.5rem;
            width: 50px;
            height: 70px;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }

        @media (min-width: 1000px) {
            .navbar-brand-box {
                width: 250px;
            }
        }

        .table-wrapper {
    position: relative;
    width: 100%;
    max-width: 100%;
    margin: 0 auto;
}

.table-scroll {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
}

/* Base table styles */
table {
    margin-top: 30px;
    width: max-content;
    min-width: 100%;
    border-collapse: collapse;
    background: #fff;
}

/* Header styles */
thead th {
    position: sticky;
    top: 0;
    background: #f8f9fa;
    padding: 15px;
    font-size: 14px;
    font-weight: 600;
    text-align: left;
    border-bottom: 2px solid #dee2e6;
    white-space: nowrap;
    min-width: 200px; /* Ensure minimum width for readability */
}

/* Cell styles */
td {
    padding: 15px;
    border-bottom: 1px solid #dee2e6;
    font-size: 14px;
    vertical-align: top;
    min-width: 200px; /* Match header width */
}

/* Button styles */
.manage-btn {
    width: 100%;
    padding: 10px;
    font-size: 14px;
    border: none;
    background: #4B93FF;
    color: white;
    border-radius: 4px;
    cursor: pointer;
}

/* Mobile specific styles */
@media screen and (max-width: 768px) {
    .main-content {
        padding: 10px;
    }
    
    .table-wrapper {
        margin: 0 -10px; /* Negative margin to allow full-width scrolling */
    }
    
    .table-scroll {
        padding: 0 10px;
    }
    
    /* Increase touch targets on mobile */
    th, td {
        padding: 15px;
        font-size: 16px; /* Larger font size for better readability */
    }
    
    .manage-btn {
        padding: 12px 16px; /* Larger buttons for touch */
        font-size: 16px;
        width: 100%; /* Full width buttons on mobile */
    }
}

/* Active states for buttons */
.manage-btn:active,
.manage-btn:hover {
    background: #3672cc;
}

/* Smooth scrolling behavior */
.table-scroll {
    scroll-behavior: smooth;
}

@media screen and (max-width: 768px) {
    .main-content {
        padding: 10px;
    }
    
    .table-wrapper {
        margin: 0 -10px; /* Negative margin to allow full-width scrolling */
    }
    
    .table-scroll {
        padding: 0 10px;
    }
    
    /* Increase touch targets on mobile */
    th, td {
        padding: 15px;
        font-size: 16px; /* Larger font size for better readability */
    }
    
    .manage-btn {
        padding: 12px 16px; /* Larger buttons for touch */
        font-size: 16px;
        width: 100%; /* Full width buttons on mobile */
    }
}
        .manage-btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 30px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            white-space: nowrap;
        }

        .manage-btn:hover {
            background-color: #45a049;
        }

        .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
}

.modal-content {
    position: relative;
    background-color: #fff;
    margin: 5% auto;
    padding: 20px;
    width: 90%;
    max-width: 500px;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
}

.modal-title {
    font-size: 20px;
    font-weight: bold;
    margin: 0;
    margin-top: -20px;
}

.close {
    font-size: 24px;
    cursor: pointer;
    color: #666;
    width: 30px;
    margin-top: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: black;
    border: none;
}

.closes {
    font-size: 24px;
    cursor: pointer;
    color: white;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: black;
    border: none;
}


.search-container {
    margin: 20px 0;
    text-align: center;
}

.search-input {
    width: 80%;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 25px;
    font-size: 16px;
    outline: none;
}

.search-input:focus {
    border-color: #128C7E;
}

.contacts-container {
    max-height: 400px;
    overflow-y: auto;
    margin: 20px 0;
}

.contact-card {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    cursor: pointer;
    border-bottom: 1px solid #f0f0f0;
    transition: background-color 0.2s;
}

.contact-card:hover {
    background-color: #f5f5f5;
}

.avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #128C7E;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
    font-weight: bold;
}

.contact-info {
    flex-grow: 1;
}

.contact-name {
    font-weight: bold;
    margin-bottom: 4px;
}

.contact-role {
    color: #666;
    font-size: 14px;
}

.selected-contacts {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    padding: 10px;
    min-height: 45px;
    border-bottom: 1px solid #ddd;
}

.selected-contact {
    display: flex;
    align-items: center;
    background-color: #E8F5E9;
    padding: 5px 10px;
    border-radius: 20px;
    font-size: 14px;
}

.selected-contact .avatar {
    width: 25px;
    height: 25px;
    font-size: 12px;
    margin-right: 8px;
}

.remove-contact {
    margin-left: 8px;
    cursor: pointer;
    color: #666;
    padding: 0 5px;
}

.remove-contact:hover {
    color: #ff4444;
}

.modal-footer {
    display: flex;
    justify-content: flex-end;
    padding-top: 20px;
    border-top: 1px solid #eee;
    margin-top: 20px;
}

.save-btn {
    background-color: #128C7E;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.2s;
}

.save-btn:hover {
    background-color: #0a7567;
}

.table-cell {
    padding: 10px;
    border: 1px solid #ddd;
    min-width: 200px;
}

.selected-names-display {
    font-size: 14px;
    color: #333;
    line-height: 1.4;
    margin-top: 20px;
    margin-left: 20px;
}

.edit-btn {
    background: none;
    border: none;
    color: #128C7E;
    cursor: pointer;
    font-size: 12px;
    margin-left: 10px;
    padding: 2px 5px;
    border-radius: 3px;
}

.edit-btn:hover {
    background-color: #E8F5E9;
}

.discussion-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

        .company-selection {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }

        .company-column {
            flex: 1;
            background: #1e1e1e;
            padding: 15px;
            border-radius: 8px;
        }

        .company-option {
            padding: 10px;
            margin: 5px 0;
            background: #2c2c2c;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .company-option.selected {
            background: #4CAF50;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 10px;
            color: white;
            font-size: 28px;
            cursor: pointer;
        }

        .add-btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 30px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 20px;
            width: 100%;
        }

        .add-btn:hover {
            background-color: #45a049;
        }

        .companies-display {
            border: #1a1a1a;
            background: white;
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
            display: none;
        }

        .color-sidebar {
            background-color: #2A3042;
        }

        .text-style {
            color: white;
        }

        .sub-agreement-list {
            margin: 20px 0;
            border: 1px solid #404040;
            border-radius: 4px;
        }

        .sub-agreement-item {
            border-bottom: 1px solid #404040;
            color: white;
        }

        .sub-agreement-item:last-child {
            border-bottom: none;
        }

        .sub-agreement-header {
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            background-color: #2A3042;
        }

        .sub-agreement-content {
            padding: 0 15px;
            background-color: #1e1e1e;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .sub-agreement-content.active {
            padding: 15px;
            max-height: 500px;
        }

        .arrow {
            width: 20px;
            height: 20px;
            transition: transform 0.3s ease;
        }

        .arrow.active {
            transform: rotate(180deg);
        }

        .add-terms-btn {
            background-color: #007bff;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            float: right;
            margin-top: 10px;
        }

        .add-terms-btn:hover {
            background-color: #0056b3;
        }

        .terms-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .terms-form input, .terms-form textarea {
            width: 100%;
            padding: 8px;
            margin: 8px 0;
            border: 1px solid #404040;
            border-radius: 4px;
            background-color: #1a1a1a;
            color: white;
        }

        .terms-form textarea {
            height: 100px;
            resize: vertical;
        }

        .save-btn {
            background-color: #28a745;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: -40px;
            margin-right: 20px;
            width: auto;
        }

        .save-btn:hover {
            background-color: #218838;
        }

        .main-content {
            margin-top: 100px;
        }
        .discussion-cell {
            position: relative;
        }

        .discussion-cell[data-has-companies="true"] .manage-btn {
            display: none;
        }

        .discussion-cell[data-has-companies="true"] .companies-display {
            display: block;
        }

        #vertical-menu-btn {
    display: block;
}
@media screen and (min-width: 769px) {
    #vertical-menu-btn {
        display: none !important;
    }
}

.add-row-btn {
    position: fixed;
    background-color: #128C7E;
    color: white;
    border: none;
    margin-top: -20px;
    display: flex;
    justify-content: flex-end;
    padding: 10px 20px;
    border-radius: 5px;
    margin-left: 20px;
    cursor: pointer;
    font-size: 14px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    z-index: 1000;
}

.add-row-btn:hover {
    background-color: #0a7567;
}

.sub-agreement-item {
    position: relative;
    transition: all 0.3s ease;
}

.sub-agreement-item.locked {
    opacity: 0.5;
    pointer-events: none;
    filter: blur(2px);
}

.sub-agreement-header {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    padding: 10px;
    background-color: black;
    border-radius: 4px;
}

/* Add a lock icon for locked items */
.lock-icon {
    width: 16px;
    height: 16px;
    margin-left: 8px;
    display: none;
}

.sub-agreement-item.locked .lock-icon {
    display: inline;
}

.checkbox-wrapper {
    display: flex;
    align-items: center;
    margin-right: 10px;
}

.custom-checkbox {
    width: 20px;
    height: 20px;
    border: 2px solid #ff0000;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.custom-checkbox.checked {
    background-color: #00ff00;
    border-color: #00ff00;
}

.custom-checkbox:hover {
    opacity: 0.8;
}

.checkmark {
    color: white;
    display: none;
}

.custom-checkbox.checked .checkmark {
    display: block;
}

.arrow {
    width: 20px;
    height: 20px;
    margin-left: auto;
    transition: transform 0.3s ease;
}

.sub-agreement-content {
    padding: 10px;
    display: none;
}

.sub-agreement-content.active {
    display: block;
}

.arrow.active {
    transform: rotate(180deg);
}
    </style>
</head>
<body>
    <header id="page-topbar">
        <div class="navbar-header">
            <div class="d-flex">
                <!-- LOGO -->
                <div class="navbar-brand-box">
                    <a href="index.html" class="logo logo-dark">
                        <!-- <span class="logo-sm">
                            <img src="assets/images/logo.svg" alt="" height="22">
                        </span>
                        <span class="logo-lg">
                            <img src="assets/images/logo-dark.png" alt="" height="17">
                        </span> -->
                    </a>

                    <!-- <a href="index.html" class="logo logo-light">
                        <span class="logo-sm">
                            <img src="assets/images/logo-light.svg" alt="" height="22">
                        </span>
                        <span class="logo-lg">
                            <img src="assets/images/logo-light.png" alt="" height="19">
                        </span>
                    </a> -->
                </div>

                <button type="button" class="btn btn-sm px-3 font-size-16 header-item waves-effect" id="vertical-menu-btn" 
                >
            <i class="fa fa-fw fa-bars"></i>
                </button>

                

                <div class="dropdown dropdown-mega d-none d-lg-block ms-2">
                    <!-- <button type="button" class="btn header-item waves-effect" data-bs-toggle="dropdown" aria-haspopup="false" aria-expanded="false">
                        <span key="t-megamenu">Mega Menu</span>
                        <i class="mdi mdi-chevron-down"></i> 
                    </button> -->
                    <div class="dropdown-menu dropdown-megamenu">
                        <div class="row">
                            <div class="col-sm-8">

                                <div class="row">
                                    <div class="col-md-4">
                                        <h5 class="font-size-14" key="t-ui-components">UI Components</h5>
                                        <ul class="list-unstyled megamenu-list">
                                            <li>
                                                <a href="javascript:void(0);" key="t-lightbox">Lightbox</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-range-slider">Range Slider</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-sweet-alert">Sweet Alert</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-rating">Rating</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-forms">Forms</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-tables">Tables</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-charts">Charts</a>
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="col-md-4">
                                        <h5 class="font-size-14" key="t-applications">Applications</h5>
                                        <ul class="list-unstyled megamenu-list">
                                            <li>
                                                <a href="javascript:void(0);" key="t-ecommerce">Ecommerce</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-calendar">Calendar</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-email">Email</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-projects">Projects</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-tasks">Tasks</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-contacts">Contacts</a>
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="col-md-4">
                                        <h5 class="font-size-14" key="t-extra-pages">Extra Pages</h5>
                                        <ul class="list-unstyled megamenu-list">
                                            <li>
                                                <a href="javascript:void(0);" key="t-light-sidebar">Light Sidebar</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-compact-sidebar">Compact Sidebar</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-horizontal">Horizontal layout</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-maintenance">Maintenance</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-coming-soon">Coming Soon</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-timeline">Timeline</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-faqs">FAQs</a>
                                            </li>
                    
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <h5 class="font-size-14" key="t-ui-components">UI Components</h5>
                                        <ul class="list-unstyled megamenu-list">
                                            <li>
                                                <a href="javascript:void(0);" key="t-lightbox">Lightbox</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-range-slider">Range Slider</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-sweet-alert">Sweet Alert</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-rating">Rating</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-forms">Forms</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-tables">Tables</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-charts">Charts</a>
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="col-sm-5">
                                        <div>
                                            <img src="assets/images/megamenu-img.png" alt="" class="img-fluid mx-auto d-block">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="d-flex">

                <div class="dropdown d-inline-block d-lg-none ms-2">
                    <button type="button" class="btn header-item noti-icon waves-effect" id="page-header-search-dropdown"
                    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="mdi mdi-magnify"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0"
                        aria-labelledby="page-header-search-dropdown">

                        <form class="p-3">
                            <div class="form-group m-0">
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Search ..." aria-label="Recipient's username">
                                    <div class="input-group-append">
                                        <button class="btn btn-primary" type="submit"><i class="mdi mdi-magnify"></i></button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="dropdown d-inline-block">
                    <button type="button" class="btn header-item waves-effect"
                    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <img id="header-lang-img" src="assets/images/flags/us.jpg" alt="Header Language" height="16">
                    </button>
                    <div class="dropdown-menu dropdown-menu-end">

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="en">
                            <img src="assets/images/flags/us.jpg" alt="user-image" class="me-1" height="12"> <span class="align-middle">English</span>
                        </a>
                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="sp">
                            <img src="assets/images/flags/spain.jpg" alt="user-image" class="me-1" height="12"> <span class="align-middle">Spanish</span>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="gr">
                            <img src="assets/images/flags/germany.jpg" alt="user-image" class="me-1" height="12"> <span class="align-middle">German</span>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="it">
                            <img src="assets/images/flags/italy.jpg" alt="user-image" class="me-1" height="12"> <span class="align-middle">Italian</span>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="ru">
                            <img src="assets/images/flags/russia.jpg" alt="user-image" class="me-1" height="12"> <span class="align-middle">Russian</span>
                        </a>
                    </div>
                </div>

                <div class="dropdown d-none d-lg-inline-block ms-1">
                    <button type="button" class="btn header-item noti-icon waves-effect"
                    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="bx bx-customize"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end">
                        <div class="px-lg-2">
                            <div class="row g-0">
                                <div class="col">
                                    <a class="dropdown-icon-item" href="#">
                                        <img src="assets/images/brands/github.png" alt="Github">
                                        <span>GitHub</span>
                                    </a>
                                </div>
                                <div class="col">
                                    <a class="dropdown-icon-item" href="#">
                                        <img src="assets/images/brands/bitbucket.png" alt="bitbucket">
                                        <span>Bitbucket</span>
                                    </a>
                                </div>
                                <div class="col">
                                    <a class="dropdown-icon-item" href="#">
                                        <img src="assets/images/brands/dribbble.png" alt="dribbble">
                                        <span>Dribbble</span>
                                    </a>
                                </div>
                            </div>

                            <div class="row g-0">
                                <div class="col">
                                    <a class="dropdown-icon-item" href="#">
                                        <img src="assets/images/brands/dropbox.png" alt="dropbox">
                                        <span>Dropbox</span>
                                    </a>
                                </div>
                                <div class="col">
                                    <a class="dropdown-icon-item" href="#">
                                        <img src="assets/images/brands/mail_chimp.png" alt="mail_chimp">
                                        <span>Mail Chimp</span>
                                    </a>
                                </div>
                                <div class="col">
                                    <a class="dropdown-icon-item" href="#">
                                        <img src="assets/images/brands/slack.png" alt="slack">
                                        <span>Slack</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dropdown d-none d-lg-inline-block ms-1">
                    <button type="button" class="btn header-item noti-icon waves-effect" data-bs-toggle="fullscreen">
                        <i class="bx bx-fullscreen"></i>
                    </button>
                </div>

                <div class="dropdown d-inline-block">
                    <button type="button" class="btn header-item noti-icon waves-effect" id="page-header-notifications-dropdown"
                    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="bx bx-bell bx-tada"></i>
                        <span class="badge bg-danger rounded-pill">3</span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0"
                        aria-labelledby="page-header-notifications-dropdown">
                        <div class="p-3">
                            <div class="row align-items-center">
                                <div class="col">
                                    <h6 class="m-0" key="t-notifications"> Notifications </h6>
                                </div>
                                <div class="col-auto">
                                    <a href="#!" class="small" key="t-view-all"> View All</a>
                                </div>
                            </div>
                        </div>
                        <div data-simplebar style="max-height: 230px;">
                            <a href="javascript: void(0);" class="text-reset notification-item">
                                <div class="d-flex">
                                    <div class="avatar-xs me-3">
                                        <span class="avatar-title bg-primary rounded-circle font-size-16">
                                            <i class="bx bx-cart"></i>
                                        </span>
                                    </div>
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1" key="t-your-order">Your order is placed</h6>
                                        <div class="font-size-12 text-muted">
                                            <p class="mb-1" key="t-grammer">If several languages coalesce the grammar</p>
                                            <p class="mb-0"><i class="mdi mdi-clock-outline"></i> <span key="t-min-ago">3 min ago</span></p>
                                        </div>
                                    </div>
                                </div>
                            </a>
                            <a href="javascript: void(0);" class="text-reset notification-item">
                                <div class="d-flex">
                                    <img src="assets/images/users/avatar-3.jpg"
                                        class="me-3 rounded-circle avatar-xs" alt="user-pic">
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1">James Lemire</h6>
                                        <div class="font-size-12 text-muted">
                                            <p class="mb-1" key="t-simplified">It will seem like simplified English.</p>
                                            <p class="mb-0"><i class="mdi mdi-clock-outline"></i> <span key="t-hours-ago">1 hours ago</span></p>
                                        </div>
                                    </div>
                                </div>
                            </a>
                            <a href="javascript: void(0);" class="text-reset notification-item">
                                <div class="d-flex">
                                    <div class="avatar-xs me-3">
                                        <span class="avatar-title bg-success rounded-circle font-size-16">
                                            <i class="bx bx-badge-check"></i>
                                        </span>
                                    </div>
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1" key="t-shipped">Your item is shipped</h6>
                                        <div class="font-size-12 text-muted">
                                            <p class="mb-1" key="t-grammer">If several languages coalesce the grammar</p>
                                            <p class="mb-0"><i class="mdi mdi-clock-outline"></i> <span key="t-min-ago">3 min ago</span></p>
                                        </div>
                                    </div>
                                </div>
                            </a>

                            <a href="javascript: void(0);" class="text-reset notification-item">
                                <div class="d-flex">
                                    <img src="assets/images/users/avatar-4.jpg"
                                        class="me-3 rounded-circle avatar-xs" alt="user-pic">
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1">Salena Layfield</h6>
                                        <div class="font-size-12 text-muted">
                                            <p class="mb-1" key="t-occidental">As a skeptical Cambridge friend of mine occidental.</p>
                                            <p class="mb-0"><i class="mdi mdi-clock-outline"></i> <span key="t-hours-ago">1 hours ago</span></p>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="p-2 border-top d-grid">
                            <a class="btn btn-sm btn-link font-size-14 text-center" href="javascript:void(0)">
                                <i class="mdi mdi-arrow-right-circle me-1"></i> <span key="t-view-more">View More..</span> 
                            </a>
                        </div>
                    </div>
                </div>

                <div class="dropdown d-inline-block">
                    <button type="button" class="btn header-item waves-effect" id="page-header-user-dropdown"
                    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <img class="rounded-circle header-profile-user" src="assets/images/users/avatar-1.jpg"
                            alt="Header Avatar">
                        <span class="d-none d-xl-inline-block ms-1" key="t-henry">Hriday Sarma</span>
                        <i class="mdi mdi-chevron-down d-none d-xl-inline-block"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end">
                        <!-- item-->
                        <a class="dropdown-item" href="#"><i class="bx bx-user font-size-16 align-middle me-1"></i> <span key="t-profile">Profile</span></a>
                        <a class="dropdown-item" href="#"><i class="bx bx-wallet font-size-16 align-middle me-1"></i> <span key="t-my-wallet">My Wallet</span></a>
                        <a class="dropdown-item d-block" href="#"><span class="badge bg-success float-end">11</span><i class="bx bx-wrench font-size-16 align-middle me-1"></i> <span key="t-settings">Settings</span></a>
                        <a class="dropdown-item" href="#"><i class="bx bx-lock-open font-size-16 align-middle me-1"></i> <span key="t-lock-screen">Lock screen</span></a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item text-danger" href="#"><i class="bx bx-power-off font-size-16 align-middle me-1 text-danger"></i> <span key="t-logout">Logout</span></a>
                    </div>
                </div>

                <!-- <div class="dropdown d-inline-block">
                    <button type="button" class="btn header-item noti-icon right-bar-toggle waves-effect">
                        <i class="bx bx-cog bx-spin"></i>
                    </button>
                </div> -->

            </div>
        </div>
    </header>

    <div class="vertical-menu color-sidebar">
        <div data-simplebar class="h-200">
            <div id="sidebar-menu">
                <ul class="metismenu list-unstyled" id="side-menu">
                    <li class="menu-title" key="t-menu">Menu</li>
                    <li>
                        <li><a href="index.html" style="color: white; display: block;
                            font-size: 14px;
                            font-weight: 500;
                            transition: all 0.3s ease;
                            text-decoration: none;">Dashboard</a></li>
                    </li>
                    <li class="menu-title" key="t-apps">Apps</li>
                    <li>
                        <a href="search.html">
                            <span key="t-dashboards" class="text-style">Vendor Search</span>
                        </a>
                        <a href="chat.html">
                            <span key="t-dashboards" class="text-style">Discussion</span>
                        </a>
                        <a href="business-operation.html">
                            <span key="t-dashboards" class="text-style">Business Operation</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="main-content">
        <button class="add-row-btn" onclick="addNewRow()">Add New Row</button>

        <div class="table-wrapper">
            <div class="table-scroll">
                <table id="mainTable">
                    <thead>
                        <tr>
                            <th>Initial Discussion</th>
                            <th>Product/Service Specifications</th>
                            <th>Payment Terms & Conditions</th>
                            <th>Platform Fees</th>
                            <th>Regulatory Compliances</th>
                            <th>Shipping</th>
                            <th>Customs Clearance</th>
                            <th>Delivery</th>
                            <th>Deal Completed</th>
                            <th>Return Policy</th>
                            <th>Dispute Resolution</th>
                            <th>Warranty</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr>
                            <td class="table-cell">
                                <div id="discussionContainer" class="discussion-container">
                                    <button id="addDiscussionBtn" class="manage-btn" style="margin-top: 5px;" onclick="openModal()">Add Discussion</button>
                                    <div id="selectedNamesDisplay" class="selected-names-display" style="display: none">
                                        <span id="displayedNames"></span>
                                        <button class="edit-btn" onclick="openModal()">Edit</button>
                                    </div>
                                </div>
                            </td>
                            <td><button class="manage-btn" onclick="openMainModal()">Manage sub agreements</button></td>
                            <td><button class="manage-btn" onclick="openMainModal()">Manage sub agreements</button></td>
                            <td><button class="manage-btn" onclick="openMainModal()">Manage sub agreements</button></td>
                            <td><button class="manage-btn" onclick="openMainModal()">Manage sub agreements</button></td>
                            <td><button class="manage-btn" onclick="openMainModal()">Manage sub agreements</button></td>
                            <td><button class="manage-btn" onclick="openMainModal()">Manage sub agreements</button></td>
                            <td><button class="manage-btn" onclick="openMainModal()">Manage sub agreements</button></td>
                            <td><button class="manage-btn" onclick="openMainModal()">Manage sub agreements</button></td>
                            <td><button class="manage-btn" onclick="openMainModal()">Manage sub agreements</button></td>
                            <td><button class="manage-btn" onclick="openMainModal()">Manage sub agreements</button></td>
                            <td><button class="manage-btn" onclick="openMainModal()">Manage sub agreements</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="searchModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">Select Contacts</h2>
                    <div class="modal-footer">
                        <button class="save-btn" onclick="saveContacts()">Save</button>
                    </div>
                    <button class="close" onclick="closeModal()">&times;</button>
                </div>
                <div class="selected-contacts" id="selectedContacts"></div>
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Search contacts..." oninput="filterContacts(this.value)">
                </div>
                <div class="contacts-container" id="contactsList"></div>
            </div>
        </div>


        <div id="mainModal" class="modal">
            <div class="modal-content">
                <div style="display: flex; justify-content: flex-end;">
                    <span class="closes" onclick="closeMainModal()">&times;</span>
                </div>
                <h2>Manage Sub-Agreements</h2>
                <div class="sub-agreement-list">
                    <div class="sub-agreement-item" data-index="0">
                        <div class="sub-agreement-header" onclick="toggleContent(0)">
                            <div class="checkbox-wrapper" onclick="toggleCheckbox(event, 0)">
                                <div class="custom-checkbox">
                                    <span class="checkmark">✓</span>
                                </div>
                            </div>
                            <span>1. Purpose</span>
                            <svg class="lock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            <svg class="arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </div>
                        <div class="sub-agreement-content">
                            <p>Define the main objectives and scope of the agreement between parties.</p>
                        </div>
                    </div>

                    <div class="sub-agreement-item" data-index="0">
                        <div class="sub-agreement-header" onclick="toggleContent(1)">
                            <div class="checkbox-wrapper" onclick="toggleCheckbox(event, 1)">
                                <div class="custom-checkbox">
                                    <span class="checkmark">✓</span>
                                </div>
                            </div>
                            <span>1. Purpose</span>
                            <svg class="lock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            <svg class="arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </div>
                        <div class="sub-agreement-content">
                            <p>Define the main objectives and scope of the agreement between parties.</p>
                        </div>
                    </div>

                    <div class="sub-agreement-item" data-index="0">
                        <div class="sub-agreement-header" onclick="toggleContent(2)">
                            <div class="checkbox-wrapper" onclick="toggleCheckbox(event, 2)">
                                <div class="custom-checkbox">
                                    <span class="checkmark">✓</span>
                                </div>
                            </div>
                            <span>1. Purpose</span>
                            <svg class="lock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            <svg class="arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </div>
                        <div class="sub-agreement-content">
                            <p>Define the main objectives and scope of the agreement between parties.</p>
                        </div>
                    </div>

                    <div class="sub-agreement-item" data-index="0">
                        <div class="sub-agreement-header" onclick="toggleContent(3)">
                            <div class="checkbox-wrapper" onclick="toggleCheckbox(event, 3)">
                                <div class="custom-checkbox">
                                    <span class="checkmark">✓</span>
                                </div>
                            </div>
                            <span>1. Purpose</span>
                            <svg class="lock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            <svg class="arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </div>
                        <div class="sub-agreement-content">
                            <p>Define the main objectives and scope of the agreement between parties.</p>
                        </div>
                    </div>

                    <div class="sub-agreement-item" data-index="0">
                        <div class="sub-agreement-header" onclick="toggleContent(4)">
                            <div class="checkbox-wrapper" onclick="toggleCheckbox(event, 4)">
                                <div class="custom-checkbox">
                                    <span class="checkmark">✓</span>
                                </div>
                            </div>
                            <span>1. Purpose</span>
                            <svg class="lock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            <svg class="arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </div>
                        <div class="sub-agreement-content">
                            <p>Define the main objectives and scope of the agreement between parties.</p>
                        </div>
                    </div>

                </div>
                <button class="add-terms-btn" onclick="openTermsModal()">Add Terms</button>
            </div>
        </div>


        <div id="termsModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeTermsModal()">&times;</span>
                <h2>Add Terms</h2>
                <div class="terms-form">
                    <div>
                        <label for="heading">Heading</label>
                        <input type="text" id="heading" placeholder="Enter heading">
                    </div>
                    <div>
                        <label for="description">Description</label>
                        <textarea id="description" placeholder="Enter description"></textarea>
                    </div>
                    <button class="save-btn" onclick="closeTermsModal()">Save</button>
                </div>
            </div>
        </div>

        <script>
            const mainModal = document.getElementById('mainModal');
            const termsModal = document.getElementById('termsModal');
            const contents = document.querySelectorAll('.sub-agreement-content');
            const arrows = document.querySelectorAll('.arrow');

          // Store selected contacts for each row
const rowContacts = new Map();
let rowCounter = 0;

const contacts = [
    { name: 'Alice Johnson', role: 'Product Manager' },
    { name: 'Bob Smith', role: 'Senior Developer' },
    { name: 'Carol Williams', role: 'UX Designer' },
    { name: 'David Brown', role: 'Marketing Director' },
    { name: 'Emma Davis', role: 'Project Lead' },
    { name: 'Frank Miller', role: 'Business Analyst' },
    { name: 'Grace Lee', role: 'Software Engineer' },
    { name: 'Henry Wilson', role: 'Quality Assurance' },
    { name: 'Ivy Chen', role: 'Data Scientist' },
    { name: 'Jack Taylor', role: 'Systems Architect' }
];

let currentEditingRow = null;

// Initialize the first row when the page loads
document.addEventListener('DOMContentLoaded', function() {
    // Initialize the first row's contact set
    rowContacts.set(0, new Set());
    
    // Get the original button HTML and selected names display HTML
    const originalButtonHtml = document.getElementById('addDiscussionBtn')?.outerHTML || '';
    const originalDisplayHtml = document.getElementById('selectedNamesDisplay')?.outerHTML || '';
    
    // Update the first row's HTML to match the structure we use for new rows
    const firstRowDiscussionCell = document.querySelector('.table-cell');
    if (firstRowDiscussionCell) {
        firstRowDiscussionCell.innerHTML = `
            <div id="discussionContainer-0" class="discussion-container">
                <button id="addDiscussionBtn-0" class="manage-btn" style="margin-top: 5px;" onclick="openModal(0)">Add Discussion</button>
                <div id="selectedNamesDisplay-0" class="selected-names-display" style="display: none">
                    <span id="displayedNames-0"></span>
                    <button class="edit-btn" onclick="openModal(0)">Edit</button>
                </div>
            </div>
        `;
    }
    
    rowCounter = 1;
});

function addNewRow() {
    const tbody = document.getElementById('tableBody');
    const newRow = document.createElement('tr');
    
    rowContacts.set(rowCounter, new Set());
    
    const discussionCell = document.createElement('td');
    discussionCell.className = 'table-cell';
    discussionCell.innerHTML = `
        <div id="discussionContainer-${rowCounter}" class="discussion-container">
            <button id="addDiscussionBtn-${rowCounter}" class="manage-btn" style="margin-top: 5px;" onclick="openModal(${rowCounter})">Add Discussion</button>
            <div id="selectedNamesDisplay-${rowCounter}" class="selected-names-display" style="display: none">
                <span id="displayedNames-${rowCounter}"></span>
                <button class="edit-btn" onclick="openModal(${rowCounter})">Edit</button>
            </div>
        </div>
    `;
    newRow.appendChild(discussionCell);
    
    for (let i = 0; i < 11; i++) {
        const td = document.createElement('td');
        td.innerHTML = '<button class="manage-btn" onclick="openMainModal()">Manage sub agreements</button>';
        newRow.appendChild(td);
    }
    
    tbody.appendChild(newRow);
    rowCounter++;
}

function openModal(rowIndex) {
    currentEditingRow = rowIndex;
    const modal = document.getElementById('searchModal');
    modal.style.display = 'block';
    
    // Clear and initialize the selected contacts display
    const selectedContactsDiv = document.getElementById('selectedContacts');
    selectedContactsDiv.innerHTML = '';
    
    // Pre-populate selected contacts if any exist for this row
    if (rowContacts.has(rowIndex)) {
        const selectedContacts = rowContacts.get(rowIndex);
        if (selectedContacts.size > 0) {
            renderSelectedContacts();
        }
    }
    
    renderContacts(contacts);
}

function closeModal() {
    document.getElementById('searchModal').style.display = 'none';
    currentEditingRow = null;
}

function getInitials(name) {
    return name.split(' ').map(word => word[0]).join('');
}

function renderContacts(contactsToRender) {
    const contactsList = document.getElementById('contactsList');
    contactsList.innerHTML = contactsToRender.map(contact => `
        <div class="contact-card ${isContactSelected(contact) ? 'selected' : ''}" 
             onclick="toggleContact('${contact.name}', '${contact.role}')">
            <div class="avatar">${getInitials(contact.name)}</div>
            <div class="contact-info">
                <div class="contact-name">${contact.name}</div>
                <div class="contact-role">${contact.role}</div>
            </div>
        </div>
    `).join('');
}

function isContactSelected(contact) {
    if (currentEditingRow === null || !rowContacts.has(currentEditingRow)) return false;
    return Array.from(rowContacts.get(currentEditingRow))
        .some(c => c.name === contact.name);
}

function renderSelectedContacts() {
    const selectedContactsDiv = document.getElementById('selectedContacts');
    if (currentEditingRow === null || !rowContacts.has(currentEditingRow)) return;

    const selectedContacts = rowContacts.get(currentEditingRow);
    selectedContactsDiv.innerHTML = Array.from(selectedContacts).map(contact => `
        <div class="selected-contact">
            <div class="avatar">${getInitials(contact.name)}</div>
            ${contact.name}
            <span class="remove-contact" onclick="removeContact('${contact.name}', '${contact.role}', event)">×</span>
        </div>
    `).join('');

    // Show selected contacts in the modal header
    selectedContactsDiv.style.display = selectedContacts.size > 0 ? 'flex' : 'none';
}

function toggleContact(name, role) {
    if (currentEditingRow === null) return;
    
    const contact = { name, role };
    const rowSelectedContacts = rowContacts.get(currentEditingRow) || new Set();
    
    if (Array.from(rowSelectedContacts).some(c => c.name === name)) {
        rowSelectedContacts.delete(Array.from(rowSelectedContacts).find(c => c.name === name));
    } else {
        rowSelectedContacts.add(contact);
    }
    
    rowContacts.set(currentEditingRow, rowSelectedContacts);
    renderSelectedContacts();
    renderContacts(contacts);
}

function removeContact(name, role, event) {
    event.stopPropagation();
    if (currentEditingRow === null) return;
    
    const rowSelectedContacts = rowContacts.get(currentEditingRow);
    const contact = Array.from(rowSelectedContacts).find(c => c.name === name);
    if (contact) {
        rowSelectedContacts.delete(contact);
        renderSelectedContacts();
        renderContacts(contacts);
    }
}

function filterContacts(searchTerm) {
    const filtered = contacts.filter(contact => 
        contact.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
        contact.role.toLowerCase().includes(searchTerm.toLowerCase())
    );
    renderContacts(filtered);
}

function saveContacts() {
    if (currentEditingRow === null) return;
    
    const addDiscussionBtn = document.getElementById(`addDiscussionBtn-${currentEditingRow}`);
    const selectedNamesDisplay = document.getElementById(`selectedNamesDisplay-${currentEditingRow}`);
    const displayedNames = document.getElementById(`displayedNames-${currentEditingRow}`);
    
    const selectedContacts = rowContacts.get(currentEditingRow);
    const names = Array.from(selectedContacts).map(contact => contact.name);

    if (names.length > 0) {
        displayedNames.textContent = names.join(' & ');
        addDiscussionBtn.style.display = 'none';
        selectedNamesDisplay.style.display = 'block';
    }
    closeModal();
}

window.onclick = function(event) {
    const modal = document.getElementById('searchModal');
    if (event.target === modal) {
        closeModal();
    }
}


const state = {
    completedItems: new Set(),
    currentActiveIndex: 0
};

// Initialize the UI
document.addEventListener('DOMContentLoaded', function() {
    // Lock all items except the first one
    const items = document.querySelectorAll('.sub-agreement-item');
    items.forEach((item, index) => {
        if (index > 0) {
            item.classList.add('locked');
        }
    });
});

function toggleContent(index) {
    // Only allow toggling if the item is not locked
    const items = document.querySelectorAll('.sub-agreement-item');
    const item = items[index];
    
    if (!item.classList.contains('locked')) {
        const content = item.querySelector('.sub-agreement-content');
        const arrow = item.querySelector('.arrow');
        
        content.classList.toggle('active');
        arrow.classList.toggle('active');
    }
}

function toggleCheckbox(event, index) {
    event.stopPropagation();
    
    // Only proceed if this is the current active item
    if (index === state.currentActiveIndex) {
        const checkbox = document.querySelectorAll('.custom-checkbox')[index];
        const items = document.querySelectorAll('.sub-agreement-item');
        
        // Toggle checkbox
        checkbox.classList.toggle('checked');
        
        if (checkbox.classList.contains('checked')) {
            // Add to completed items
            state.completedItems.add(index);
            
            // Unlock next item if available
            if (index < items.length - 1) {
                state.currentActiveIndex = index + 1;
                items[index + 1].classList.remove('locked');
                
                // Optional: Add a visual indication that the next item is now available
                items[index + 1].style.transition = 'all 0.5s ease';
                setTimeout(() => {
                    items[index + 1].style.transform = 'translateX(5px)';
                    setTimeout(() => {
                        items[index + 1].style.transform = 'translateX(0)';
                    }, 200);
                }, 0);
            }
        } else {
            // If unchecking, lock all subsequent items
            state.completedItems.delete(index);
            for (let i = index + 1; i < items.length; i++) {
                items[i].classList.add('locked');
                const subsequentCheckbox = document.querySelectorAll('.custom-checkbox')[i];
                subsequentCheckbox.classList.remove('checked');
                state.completedItems.delete(i);
                
                // Close any open content
                const content = items[i].querySelector('.sub-agreement-content');
                const arrow = items[i].querySelector('.arrow');
                content.classList.remove('active');
                arrow.classList.remove('active');
            }
            state.currentActiveIndex = index;
        }
    }
}

// Optional: Add a visual feedback when trying to interact with locked items
document.querySelectorAll('.sub-agreement-item').forEach((item, index) => {
    item.addEventListener('click', (event) => {
        if (item.classList.contains('locked')) {
            item.style.animation = 'shake 0.5s ease-in-out';
            setTimeout(() => {
                item.style.animation = '';
            }, 500);
        }
    });
});

// Add this CSS animation to your stylesheet
const style = document.createElement('style');
style.textContent = `
    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        75% { transform: translateX(5px); }
    }
`;
document.head.appendChild(style);

function closeMainModal() {
    document.getElementById('mainModal').style.display = 'none';
}

        let selectedCompany1 = '';
        let selectedCompany2 = '';

        function openDiscussionModal() {
            document.getElementById('discussionModal').style.display = 'block';
        }

        function closeDiscussionModal() {
            document.getElementById('discussionModal').style.display = 'none';
        }

        function selectCompany1(element, companyName) {
            document.querySelectorAll('.company-column:first-child .company-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedCompany1 = companyName;
        }

        function selectCompany2(element, companyName) {
            document.querySelectorAll('.company-column:last-child .company-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedCompany2 = companyName;
        }

        function addCompanies() {
            if (selectedCompany1 && selectedCompany2) {
                const displayDiv = document.getElementById('companiesDisplay');
                const discussionCell = displayDiv.closest('.discussion-cell');
                discussionCell.setAttribute('data-has-companies', 'true');
                displayDiv.innerHTML = `Company 1: ${selectedCompany1} & Company 2: ${selectedCompany2}`;
                closeDiscussionModal();
            }
        }

        function toggleContent(index) {
                contents[index].classList.toggle('active');
                arrows[index].classList.toggle('active');
            }

            function openMainModal() {
                mainModal.style.display = 'block';
            }

            function closeMainModal() {
                mainModal.style.display = 'none';
            }

            function openTermsModal() {
                termsModal.style.display = 'block';
            }

            function closeTermsModal() {
                termsModal.style.display = 'none';
            }


            window.onclick = function(event) {
                if (event.target == mainModal) {
                    closeMainModal();
                }
                if (event.target == termsModal) {
                    closeTermsModal();
                }
            }
            
        window.onclick = function(event) {
            if (event.target == document.getElementById('discussionModal')) {
                closeDiscussionModal();
            }
        }
        </script>
    </div>
</body>
</html>