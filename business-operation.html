<!DOCTYPE html>
<html>
<head>
    <title>Business Operation</title>
    <link href="assets/css/bootstrap.min.css" id="bootstrap-style" rel="stylesheet" type="text/css" />
    <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/simplebar/5.3.6/simplebar.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="assets/css/app.min.css" id="app-style" rel="stylesheet" type="text/css" />
    <script src="assets/js/plugin.js"></script>
    <style>
        * {
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }


        .containers {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 20px;
        }

        .table-container {
            max-width: 1200px;
            margin: 50px auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #e3d5ca;
            padding: 16px;
            text-align: left;
            font-size: 12px;
            font-weight: 800;
            color: #374151;
            border-bottom: 1px solid #e5e7eb;
        }

        td {
            border: 2px solid #edede9;
            padding: 16px;
            max-width: 500px;
            vertical-align: middle;
        }

        .vertical-menu {
    position: fixed;
    top: 70px;
    left: 0;
    width: 250px;
    height: 100%;
    z-index: 999;
}

#page-topbar {
    position: fixed;
    top: 0;
    right: 0;
    left: 0;
    z-index: 1000;
}

.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
}

.modal-content {
    position: relative;
    background-color: #fff;
    margin: 50px auto;
    padding: 20px;
    width: 90%;
    max-width: 500px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.modal-title {
    font-size: 18px;
    font-weight: 500;
    color: #333;
}

.save-btn {
    background-color: #28a745;
    color: white;
    border: none;
    padding: 6px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
}

.save-btn:hover {
    background-color: #218838;
}

.close-btn {
    position: absolute;
    right: 10px;
    top: 10px;
    font-size: 20px;
    cursor: pointer;
    color: #666;
    background: none;
    border: none;
    padding: 5px;
}

.search-container {
    margin-bottom: 20px;
}

.search-input {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
}

.users-list {
    max-height: 400px;
    overflow-y: auto;
}

.user-item {
    display: flex;
    align-items: center;
    padding: 12px 15px;
    cursor: pointer;
    border-bottom: 1px solid #eee;
}

.user-item:hover {
    background-color: #f8f9fa;
}

.avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #20B2AA;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 500;
    margin-right: 15px;
    font-size: 16px;
}

.user-info {
    flex-grow: 1;
}

.user-name {
    font-size: 14px;
    font-weight: 500;
    color: #333;
    margin-bottom: 4px;
}

.user-role {
    font-size: 12px;
    color: #666;
}

.user-item.selected {
    background-color: #f0f7ff;
}

.selected .user-name {
    color: #0066cc;
}

body {
    margin: 0;
    padding: 0;
    overflow-x: hidden;
}

        .add-party-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 16px;
            cursor: pointer;
            border-radius: 4px;
        }

        .checkbox-container {
            display: flex;
            justify-content: center;
            gap: 8px;
        }

        .checkbox {
            width: 20px;
            height: 20px;
            background-color: red;
            /* border: 2px solid #d1d5db; */
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .checkbox.checked {
            background: #10b981;
            border-color: #10b981;
        }


        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
        }

        .add-column-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #4CAF50;
        }

        input[type="text"] {
            width: 100%;
            padding: 8px;
            margin: 8px 0;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 16px;
        }

        .modal-buttons button {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .cancel-btn {
            background: #ddd;
        }

        .close {
    font-size: 24px;
    cursor: pointer;
    color: #666;
    width: 30px;
    margin-top: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: black;
    border: none;
}

.closes {
    font-size: 24px;
    cursor: pointer;
    color: white;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: black;
    border: none;
}


.search-container {
    margin: 20px 0;
    text-align: center;
}

.search-input {
    width: 80%;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 25px;
    font-size: 16px;
    outline: none;
}

.search-input:focus {
    border-color: #128C7E;
}

.contacts-container {
    max-height: 400px;
    overflow-y: auto;
    margin: 20px 0;
}

.contact-card {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    cursor: pointer;
    border-bottom: 1px solid #f0f0f0;
    transition: background-color 0.2s;
}

.contact-card:hover {
    background-color: #f5f5f5;
}

.avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #128C7E;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
    font-weight: bold;
}

.contact-info {
    flex-grow: 1;
}

.contact-name {
    font-weight: bold;
    margin-bottom: 4px;
}

.contact-role {
    color: #666;
    font-size: 14px;
}

.selected-contacts {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    padding: 10px;
    min-height: 45px;
    border-bottom: 1px solid #ddd;
}

.selected-contact {
    display: flex;
    align-items: center;
    background-color: #E8F5E9;
    padding: 5px 10px;
    border-radius: 20px;
    font-size: 14px;
}

.selected-contact .avatar {
    width: 25px;
    height: 25px;
    font-size: 12px;
    margin-right: 8px;
}

.remove-contact {
    margin-left: 8px;
    cursor: pointer;
    color: #666;
    padding: 0 5px;
}

.remove-contact:hover {
    color: #ff4444;
}

.modal-footer {
    display: flex;
    justify-content: flex-end;
    padding-top: 20px;
    border-top: 1px solid #eee;
    margin-top: 20px;
}

.table-cell {
    padding: 10px;
    border: 1px solid black;
    min-width: 200px;
}

.selected-names-display {
    font-size: 14px;
    color: #333;
    line-height: 1.4;
    margin-top: 20px;
    margin-left: 20px;
}

.edit-btn {
    background: none;
    border: none;
    color: #128C7E;
    cursor: pointer;
    font-size: 12px;
    margin-left: 10px;
    padding: 2px 5px;
    border-radius: 3px;
}

.edit-btn:hover {
    background-color: #E8F5E9;
}

.discussion-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

        .company-selection {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }

        .company-column {
            flex: 1;
            background: #1e1e1e;
            padding: 15px;
            border-radius: 8px;
        }

        .company-option {
            padding: 10px;
            margin: 5px 0;
            background: #2c2c2c;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .company-option.selected {
            background: #4CAF50;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 10px;
            color: white;
            font-size: 28px;
            cursor: pointer;
        }

        .add-btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 30px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 20px;
            width: 100%;
        }

        .add-btn:hover {
            background-color: #45a049;
        }

        .companies-display {
            border: #1a1a1a;
            background: white;
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
            display: none;
        }

        .color-sidebar {
            background-color: #2A3042;
        }

        .text-style {
            color: white;
        }

        .sub-agreement-list {
            margin: 20px 0;
            border: 1px solid #404040;
            border-radius: 4px;
        }

        .sub-agreement-item {
            border-bottom: 1px solid #404040;
            color: white;
        }

        .sub-agreement-item:last-child {
            border-bottom: none;
        }

        .sub-agreement-header {
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            background-color: #2A3042;
        }

        .sub-agreement-content {
            padding: 0 15px;
            background-color: #1e1e1e;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .sub-agreement-content.active {
            padding: 15px;
            max-height: 500px;
        }

        .arrow {
            width: 20px;
            height: 20px;
            transition: transform 0.3s ease;
        }

        .arrow.active {
            transform: rotate(180deg);
        }

        .add-terms-btn {
            background-color: #007bff;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            float: right;
            margin-top: 10px;
        }

        .add-terms-btn:hover {
            background-color: #0056b3;
        }

        .terms-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .terms-form input, .terms-form textarea {
            width: 100%;
            padding: 8px;
            margin: 8px 0;
            border: 1px solid #404040;
            border-radius: 4px;
            background-color: #1a1a1a;
            color: white;
        }

        .terms-form textarea {
            height: 100px;
            resize: vertical;
        }

        .save-btn {
            background-color: #28a745;
            color: white;
            padding: 8px 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 20px;
            width: auto;
        }

        .save-btn:hover {
            background-color: #218838;
        }

        .main-content {
            margin-top: 100px;
        }
        .discussion-cell {
            position: relative;
        }

        .discussion-cell[data-has-companies="true"] .manage-btn {
            display: none;
        }

        .discussion-cell[data-has-companies="true"] .companies-display {
            display: block;
        }

        #vertical-menu-btn {
    display: block;
}
@media screen and (min-width: 769px) {
    #vertical-menu-btn {
        display: none !important;
    }
}

.add-row-btn {
    position: fixed;
    background-color: #128C7E;
    color: white;
    border: none;
    margin-top: -20px;
    display: flex;
    justify-content: flex-end;
    padding: 10px 20px;
    border-radius: 5px;
    margin-left: 20px;
    cursor: pointer;
    font-size: 14px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    z-index: 1000;
}

.add-row-btn:hover {
    background-color: #0a7567;
}

.sub-agreement-item {
    position: relative;
    transition: all 0.3s ease;
}

.sub-agreement-item.locked {
    opacity: 0.5;
    pointer-events: none;
    filter: blur(2px);
}

.sub-agreement-header {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    padding: 10px;
    background-color: black;
    border-radius: 4px;
}

/* Add a lock icon for locked items */
.lock-icon {
    width: 16px;
    height: 16px;
    margin-left: 8px;
    display: none;
}

.sub-agreement-item.locked .lock-icon {
    display: inline;
}





.checkmark {
    color: white;
    display: none;
}


.arrow {
    width: 20px;
    height: 20px;
    margin-left: auto;
    transition: transform 0.3s ease;
}

.sub-agreement-content {
    padding: 10px;
    display: none;
}

.sub-agreement-content.active {
    display: block;
}

.arrow.active {
    transform: rotate(180deg);
}
.containers {
    text-align: center;
}

.new-column {
            padding: 16px;
        }

        .new-column input {
            width: 300%;
            padding: 8px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            margin-bottom: 8px;
        }

.manage-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 8px 10px;
            background: #2563eb;
            white-space: nowrap;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .manage-btn:hover {
            background: #1d4ed8;
        }

        .create-btn {
            width: 100%;
            padding: 8px;
            background: #1f2937;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .create-btn:hover {
            background: #111827;
        }


        .upload-btn {
            display: inline-flex;
            align-items: center;
            padding: 8px 16px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 8px;
            transition: background 0.2s;
        }

        .upload-btn:hover {
            background: #dc2626;
        }

 .view-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 5px 10px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            cursor: pointer;
            margin: 5px;
        }

        #file-viewer {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border: 2px solid #000;
            max-width: 80%;
            max-height: 80%;
            display: none;
            z-index: 1000;
        }
        #file-viewer img, #file-viewer iframe {
            max-width: 100%;
            max-height: 70vh;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: none;
            z-index: 999;
        }

@media (min-width: 1400px) {
    .manage-btn {
        margin-left: 70px;
    }
}

@media (min-width: 1800px) {
    .manage-btn {
        margin-left: 100px;
    }
}
.content-cell {
    cursor: pointer;
    padding: 8px;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.add-content-btn {
    background-color: #4CAF50;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
    margin: 2px;
}

.add-content-btn:hover {
    background-color: #45a049;
}

.modals {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.4);
    z-index: 1000;
}

.modal-contents {
    background-color: #fefefe;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-width: 500px;
    border-radius: 5px;
}

.closes {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.modal-content {
    background-color: #fefefe;
    margin: 15% auto;
    margin-top: 10px;
    padding: 20px;
    border: 1px solid #888;
    width: 600px;
    border-radius: 5px;
}

.name-input {
    width: 100%;
    padding: 8px;
    margin: 10px 0;
    box-sizing: border-box;
}

.closes:hover {
    color: black;
}

#contentInput {
    width: 100%;
    padding: 8px;
    margin: 10px 0;
    border: 1px solid #ddd;
    border-radius: 4px;
}

#fullContentDisplay {
    margin-top: 20px;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    white-space: pre-wrap;
}

.upload-btn {
    padding: 8px 15px;
    white-space: nowrap;
    background-color: rgb(226, 75, 75);
    border: 1px solid #ddd;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    margin-top: 5px;
}

.file-preview {
    padding: 8px 15px;
    background-color: #e0e0e0;
    border: 1px solid #ccc;
    border-radius: 4px;
    cursor: pointer;
    display: none;
    margin-top: 5px;
    text-align: center;
}

.preview-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 1000;
}

.preview-content {
    position: relative;
    width: 80%;
    max-width: 800px;
    margin: 50px auto;
    background-color: white;
    padding: 20px;
    border-radius: 8px;
}

.close-preview {
    position: absolute;
    right: 10px;
    top: 10px;
    font-size: 24px;
    cursor: pointer;
    color: #666;
}

.preview-image {
    max-width: 100%;
    max-height: 70vh;
    display: block;
    margin: 0 auto;
}

.preview-document {
    width: 100%;
    height: 70vh;
    border: none;
}

.file-icon {
    width: 40px;
    height: 40px;
    margin: 0 auto 10px;
}

#nameCell {
    font-size: 18px; 
    font-weight: 900; /* Larger font for displayed name */
    text-align: center;  /* Center the content */
    padding: 10px;  /* Add some padding */
}

/* Modal title styling */
.modal-content h3 {
    font-size: 24px;  /* Larger font for modal title */
    margin-bottom: 20px;
}

.modalw {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }
        .modal-buttons {
            margin-top: 20px;
        }

        .modal-buttons button {
            margin: 0 10px;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .modal-buttons button.confirm {
            background-color: #4CAF50;
            color: white;
        }

        .modal-buttons button.cancel {
            background-color: #ff4444;
            color: white;
        }
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #333;
            color: white;
            padding: 15px;
            border-radius: 5px;
            display: none;
            z-index: 1100;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
            }
            to {
                transform: translateX(0);
            }
        }

        .table-containers {
    margin-bottom: 40px;
    border-bottom: 2px solid #ddd;
    padding-bottom: 20px;
}

#duplicateTableBtn:hover {
    background-color: #004494;
}

.main-content-wrapper {
            margin-left: 250px; /* Match your sidebar width */
            padding-top: 80px; /* Match your navbar height */
            min-height: 100vh;
            background-color: #f8f9fa;
            position: relative;
            transition: margin-left 0.3s;
        }

        /* Container for the add button and tables */
        .table-system-container {
            padding: 20px;
            width: calc(100% - 40px); /* Account for padding */
        }

        /* Add table button styling */
        .add-table-button {
            position: fixed;
            left: calc(250px + 40px); /* Sidebar width + some padding */
            top: 100px; /* Below navbar */
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #0056b3;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            z-index: 100;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .add-table-button:hover {
            transform: scale(1.1);
            background: #004494;
        }

        /* Tables container styling */
        #tables-container {
            margin-left: 40px; /* Align with the button */
            padding: 20px;
            overflow-x: auto;
        }

        /* Table styling */
        .table-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            overflow-x: auto;
        }

        /* Responsive adjustments */
        @media screen and (max-width: 768px) {
            .main-content-wrapper {
                margin-left: 0;
            }

            .add-table-button {
                left: 20px;
            }

            #tables-container {
                margin-left: 0;
            }
        }


        .name-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
}

.name-modal-content {
    position: relative;
    background-color: #fff;
    margin: 100px auto;
    padding: 25px;
    width: 90%;
    max-width: 400px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.name-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.name-modal-title {
    font-size: 18px;
    font-weight: 500;
    color: #333;
    margin: 0;
}

.name-close-btn {
    position: absolute;
    right: 15px;
    top: 15px;
    font-size: 24px;
    cursor: pointer;
    color: #666;
    background: none;
    border: none;
    padding: 5px;
}

.name-input-container {
    margin-bottom: 20px;
}

.name-input {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
    margin-bottom: 5px;
}

.name-input:focus {
    outline: none;
    border-color: #2196F3;
    box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);
}

.name-save-btn {
    width: 100%;
    padding: 10px;
    background-color: #2196F3;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
}

.name-save-btn:hover {
    background-color: #1976D2;
}

.error-message {
    color: #dc3545;
    font-size: 12px;
    margin-top: 5px;
    display: none;
}


    </style>
</head>
<body>
    <header id="page-topbar">
        <div class="navbar-header">
            <div class="d-flex">
                <!-- LOGO -->
                <div class="navbar-brand-box">
                    <a href="index.html" class="logo logo-dark">
                        <!-- <span class="logo-sm">
                            <img src="assets/images/logo.svg" alt="" height="22">
                        </span>
                        <span class="logo-lg">
                            <img src="assets/images/logo-dark.png" alt="" height="17">
                        </span> -->
                    </a>

                    <!-- <a href="index.html" class="logo logo-light">
                        <span class="logo-sm">
                            <img src="assets/images/logo-light.svg" alt="" height="22">
                        </span>
                        <span class="logo-lg">
                            <img src="assets/images/logo-light.png" alt="" height="19">
                        </span>
                    </a> -->
                </div>

                <button type="button" class="btn btn-sm px-3 font-size-16 header-item waves-effect" id="vertical-menu-btn" 
                >
            <i class="fa fa-fw fa-bars"></i>
                </button>

                

                <div class="dropdown dropdown-mega d-none d-lg-block ms-2">
                    <!-- <button type="button" class="btn header-item waves-effect" data-bs-toggle="dropdown" aria-haspopup="false" aria-expanded="false">
                        <span key="t-megamenu">Mega Menu</span>
                        <i class="mdi mdi-chevron-down"></i> 
                    </button> -->
                    <div class="dropdown-menu dropdown-megamenu">
                        <div class="row">
                            <div class="col-sm-8">

                                <div class="row">
                                    <div class="col-md-4">
                                        <h5 class="font-size-14" key="t-ui-components">UI Components</h5>
                                        <ul class="list-unstyled megamenu-list">
                                            <li>
                                                <a href="javascript:void(0);" key="t-lightbox">Lightbox</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-range-slider">Range Slider</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-sweet-alert">Sweet Alert</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-rating">Rating</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-forms">Forms</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-tables">Tables</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-charts">Charts</a>
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="col-md-4">
                                        <h5 class="font-size-14" key="t-applications">Applications</h5>
                                        <ul class="list-unstyled megamenu-list">
                                            <li>
                                                <a href="javascript:void(0);" key="t-ecommerce">Ecommerce</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-calendar">Calendar</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-email">Email</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-projects">Projects</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-tasks">Tasks</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-contacts">Contacts</a>
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="col-md-4">
                                        <h5 class="font-size-14" key="t-extra-pages">Extra Pages</h5>
                                        <ul class="list-unstyled megamenu-list">
                                            <li>
                                                <a href="javascript:void(0);" key="t-light-sidebar">Light Sidebar</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-compact-sidebar">Compact Sidebar</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-horizontal">Horizontal layout</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-maintenance">Maintenance</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-coming-soon">Coming Soon</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-timeline">Timeline</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-faqs">FAQs</a>
                                            </li>
                    
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <h5 class="font-size-14" key="t-ui-components">UI Components</h5>
                                        <ul class="list-unstyled megamenu-list">
                                            <li>
                                                <a href="javascript:void(0);" key="t-lightbox">Lightbox</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-range-slider">Range Slider</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-sweet-alert">Sweet Alert</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-rating">Rating</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-forms">Forms</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-tables">Tables</a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);" key="t-charts">Charts</a>
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="col-sm-5">
                                        <div>
                                            <img src="assets/images/megamenu-img.png" alt="" class="img-fluid mx-auto d-block">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="d-flex">

                <div class="dropdown d-inline-block d-lg-none ms-2">
                    <button type="button" class="btn header-item noti-icon waves-effect" id="page-header-search-dropdown"
                    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="mdi mdi-magnify"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0"
                        aria-labelledby="page-header-search-dropdown">

                        <form class="p-3">
                            <div class="form-group m-0">
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Search ..." aria-label="Recipient's username">
                                    <div class="input-group-append">
                                        <button class="btn btn-primary" type="submit"><i class="mdi mdi-magnify"></i></button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="dropdown d-inline-block">
                    <button type="button" class="btn header-item waves-effect"
                    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <img id="header-lang-img" src="assets/images/flags/us.jpg" alt="Header Language" height="16">
                    </button>
                    <div class="dropdown-menu dropdown-menu-end">

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="en">
                            <img src="assets/images/flags/us.jpg" alt="user-image" class="me-1" height="12"> <span class="align-middle">English</span>
                        </a>
                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="sp">
                            <img src="assets/images/flags/spain.jpg" alt="user-image" class="me-1" height="12"> <span class="align-middle">Spanish</span>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="gr">
                            <img src="assets/images/flags/germany.jpg" alt="user-image" class="me-1" height="12"> <span class="align-middle">German</span>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="it">
                            <img src="assets/images/flags/italy.jpg" alt="user-image" class="me-1" height="12"> <span class="align-middle">Italian</span>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="ru">
                            <img src="assets/images/flags/russia.jpg" alt="user-image" class="me-1" height="12"> <span class="align-middle">Russian</span>
                        </a>
                    </div>
                </div>

                <div class="dropdown d-none d-lg-inline-block ms-1">
                    <button type="button" class="btn header-item noti-icon waves-effect"
                    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="bx bx-customize"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end">
                        <div class="px-lg-2">
                            <div class="row g-0">
                                <div class="col">
                                    <a class="dropdown-icon-item" href="#">
                                        <img src="assets/images/brands/github.png" alt="Github">
                                        <span>GitHub</span>
                                    </a>
                                </div>
                                <div class="col">
                                    <a class="dropdown-icon-item" href="#">
                                        <img src="assets/images/brands/bitbucket.png" alt="bitbucket">
                                        <span>Bitbucket</span>
                                    </a>
                                </div>
                                <div class="col">
                                    <a class="dropdown-icon-item" href="#">
                                        <img src="assets/images/brands/dribbble.png" alt="dribbble">
                                        <span>Dribbble</span>
                                    </a>
                                </div>
                            </div>

                            <div class="row g-0">
                                <div class="col">
                                    <a class="dropdown-icon-item" href="#">
                                        <img src="assets/images/brands/dropbox.png" alt="dropbox">
                                        <span>Dropbox</span>
                                    </a>
                                </div>
                                <div class="col">
                                    <a class="dropdown-icon-item" href="#">
                                        <img src="assets/images/brands/mail_chimp.png" alt="mail_chimp">
                                        <span>Mail Chimp</span>
                                    </a>
                                </div>
                                <div class="col">
                                    <a class="dropdown-icon-item" href="#">
                                        <img src="assets/images/brands/slack.png" alt="slack">
                                        <span>Slack</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dropdown d-none d-lg-inline-block ms-1">
                    <button type="button" class="btn header-item noti-icon waves-effect" data-bs-toggle="fullscreen">
                        <i class="bx bx-fullscreen"></i>
                    </button>
                </div>

                <div class="dropdown d-inline-block">
                    <button type="button" class="btn header-item noti-icon waves-effect" id="page-header-notifications-dropdown"
                    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="bx bx-bell bx-tada"></i>
                        <span class="badge bg-danger rounded-pill">3</span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0"
                        aria-labelledby="page-header-notifications-dropdown">
                        <div class="p-3">
                            <div class="row align-items-center">
                                <div class="col">
                                    <h6 class="m-0" key="t-notifications"> Notifications </h6>
                                </div>
                                <div class="col-auto">
                                    <a href="#!" class="small" key="t-view-all"> View All</a>
                                </div>
                            </div>
                        </div>
                        <div data-simplebar style="max-height: 230px;">
                            <a href="javascript: void(0);" class="text-reset notification-item">
                                <div class="d-flex">
                                    <div class="avatar-xs me-3">
                                        <span class="avatar-title bg-primary rounded-circle font-size-16">
                                            <i class="bx bx-cart"></i>
                                        </span>
                                    </div>
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1" key="t-your-order">Your order is placed</h6>
                                        <div class="font-size-12 text-muted">
                                            <p class="mb-1" key="t-grammer">If several languages coalesce the grammar</p>
                                            <p class="mb-0"><i class="mdi mdi-clock-outline"></i> <span key="t-min-ago">3 min ago</span></p>
                                        </div>
                                    </div>
                                </div>
                            </a>
                            <a href="javascript: void(0);" class="text-reset notification-item">
                                <div class="d-flex">
                                    <img src="assets/images/users/avatar-3.jpg"
                                        class="me-3 rounded-circle avatar-xs" alt="user-pic">
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1">James Lemire</h6>
                                        <div class="font-size-12 text-muted">
                                            <p class="mb-1" key="t-simplified">It will seem like simplified English.</p>
                                            <p class="mb-0"><i class="mdi mdi-clock-outline"></i> <span key="t-hours-ago">1 hours ago</span></p>
                                        </div>
                                    </div>
                                </div>
                            </a>
                            <a href="javascript: void(0);" class="text-reset notification-item">
                                <div class="d-flex">
                                    <div class="avatar-xs me-3">
                                        <span class="avatar-title bg-success rounded-circle font-size-16">
                                            <i class="bx bx-badge-check"></i>
                                        </span>
                                    </div>
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1" key="t-shipped">Your item is shipped</h6>
                                        <div class="font-size-12 text-muted">
                                            <p class="mb-1" key="t-grammer">If several languages coalesce the grammar</p>
                                            <p class="mb-0"><i class="mdi mdi-clock-outline"></i> <span key="t-min-ago">3 min ago</span></p>
                                        </div>
                                    </div>
                                </div>
                            </a>

                            <a href="javascript: void(0);" class="text-reset notification-item">
                                <div class="d-flex">
                                    <img src="assets/images/users/avatar-4.jpg"
                                        class="me-3 rounded-circle avatar-xs" alt="user-pic">
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1">Salena Layfield</h6>
                                        <div class="font-size-12 text-muted">
                                            <p class="mb-1" key="t-occidental">As a skeptical Cambridge friend of mine occidental.</p>
                                            <p class="mb-0"><i class="mdi mdi-clock-outline"></i> <span key="t-hours-ago">1 hours ago</span></p>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="p-2 border-top d-grid">
                            <a class="btn btn-sm btn-link font-size-14 text-center" href="javascript:void(0)">
                                <i class="mdi mdi-arrow-right-circle me-1"></i> <span key="t-view-more">View More..</span> 
                            </a>
                        </div>
                    </div>
                </div>

                <div class="dropdown d-inline-block">
                    <button type="button" class="btn header-item waves-effect" id="page-header-user-dropdown"
                    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <img class="rounded-circle header-profile-user" src="assets/images/users/avatar-1.jpg"
                            alt="Header Avatar">
                        <span class="d-none d-xl-inline-block ms-1" key="t-henry">Hriday Sarma</span>
                        <i class="mdi mdi-chevron-down d-none d-xl-inline-block"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end">
                        <!-- item-->
                        <a class="dropdown-item" href="#"><i class="bx bx-user font-size-16 align-middle me-1"></i> <span key="t-profile">Profile</span></a>
                        <a class="dropdown-item" href="#"><i class="bx bx-wallet font-size-16 align-middle me-1"></i> <span key="t-my-wallet">My Wallet</span></a>
                        <a class="dropdown-item d-block" href="#"><span class="badge bg-success float-end">11</span><i class="bx bx-wrench font-size-16 align-middle me-1"></i> <span key="t-settings">Settings</span></a>
                        <a class="dropdown-item" href="#"><i class="bx bx-lock-open font-size-16 align-middle me-1"></i> <span key="t-lock-screen">Lock screen</span></a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item text-danger" href="#"><i class="bx bx-power-off font-size-16 align-middle me-1 text-danger"></i> <span key="t-logout">Logout</span></a>
                    </div>
                </div>

                <!-- <div class="dropdown d-inline-block">
                    <button type="button" class="btn header-item noti-icon right-bar-toggle waves-effect">
                        <i class="bx bx-cog bx-spin"></i>
                    </button>
                </div> -->

            </div>
        </div>
    </header>

    <div class="vertical-menu color-sidebar">
        <div data-simplebar class="h-200">
            <div id="sidebar-menu" style="background-color: #2a3042;">
                <ul class="metismenu list-unstyled" id="side-menu">
                    <li class="menu-title" key="t-menu">Menu</li>
                    <li>
                        <li><a href="index.html" style="color: white; display: block;
                            font-size: 14px;
                            font-weight: 500;
                            transition: all 0.3s ease;
                            text-decoration: none;">Dashboard</a></li>
                    </li>
                    <li class="menu-title" key="t-apps">Apps</li>
                    <li>
                        <a href="search.html">
                            <span key="t-dashboards" class="text-style">Vendor Search</span>
                        </a>
                        <a href="chat.html">
                            <span key="t-dashboards" class="text-style">Discussion</span>
                        </a>
                        <a href="business-operation.html">
                            <span key="t-dashboards" class="text-style">Business Operation</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>


    <!-- ---------------------------------CONTENT----------------------------------------- -->

    <div class="main-content-wrapper">
        <!-- Table system container -->
        <div class="table-system-container">
            <!-- Add table button -->
            <button class="add-table-button" onclick="addNewTable()">+</button>
            
            <!-- Tables container -->
            <div id="tables-container"></div>
        </div>
    </div>

    <div id="discussionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Select Contacts</h2>
                <button class="save-btn">Save</button>
            </div>
            <button class="close-btn"></button>
            
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search contacts...">
            </div>
            
            <div class="users-list" id="usersList">
                <!-- Users will be added here dynamically -->
            </div>
        </div>
    </div>

    <div id="nameModal" class="name-modal">
        <div class="name-modal-content">
            <div class="name-modal-header">
                <h2 class="name-modal-title">Add Name</h2>
                <button class="name-close-btn">&times;</button>
            </div>
            
            <div class="name-input-container">
                <input type="text" id="nameInput" class="name-input" placeholder="Enter name">
                <div class="error-message" id="nameError">Please enter a valid name</div>
            </div>
            
            <button class="name-save-btn" id="nameSaveBtn">Save</button>
        </div>
    </div>

    <div id="confirmModal" class="modal" style="text-align: center;">
        <div class="modal-contents" >
            <span class="close-btn">&times;</span>
            <h2>Confirm Action</h2>
            <p>Are you sure you want to confirm?</p>

            <div">
            <button id="confirmBtn" style="background-color: #04AA6D; /* Green */
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            border-radius: 5px;
            font-size: 16px;">Confirm</button>


            <button id="cancelBtn" style="background-color: red; /* Green */
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            border-radius: 5px;
            font-size: 16px;">Cancel</button>
            </div>
        </div>
    </div>

    <div id="file-viewer-overlay" class="overlay"></div>
    <div id="file-viewer">
        <button onclick="closeFileViewer()">Close</button>
        <div id="file-viewer-content"></div>
    </div>

    <div id="toast" class="toast"></div>

    <script>
        let tableCounter = 0;

        function addNewTable() {
            const tableId = `table-${tableCounter++}`;
            const container = document.getElementById('tables-container');

            const tableHTML = `
                <div class="table-container" id="${tableId}">
        <table>
           <thead>
    <tr>
        <th style="text-align: center; vertical-align: middle;">Initial Discussion</th>
        <th style="text-align: center; vertical-align: middle;">Sub Agreement</th>
        <th style="text-align: center; vertical-align: middle;">Product/ Service Specification</th>
        <th style="text-align: center; vertical-align: middle;">Payment Terms and Conditions</th>
        <th style="text-align: center; vertical-align: middle;">Platform Fee</th>
        <th style="text-align: center; vertical-align: middle;">Packaging and Labelling</th>
        <th style="text-align: center; vertical-align: middle;">Logistics and Insurance</th>
        <th style="text-align: center; vertical-align: middle;" id="dynamic-columns-${tableId}">New Column</th>
        <th style="text-align: center; vertical-align: middle;">Deal Completed</th>
    </tr>
</thead>
            <tbody>
                <tr>
                    <td>
                        <button class="manage-btn" onclick="manageDiscussion('${tableId}')">
                            <span>+</span>
                            Add Discussion
                        </button>
                    </td>
                    <td>
                        <div class="checkbox-container">                           
                                <div class="checkbox" style="margin-top: 15px;" onclick="handleCheckbox(this, '${tableId}')"></div>
                                <div class="checkbox" style="margin-top: 15px;" onclick="handleCheckbox(this, '${tableId}')"></div>
                            <input type="file" id="fileInput-${tableId}" style="display:none" onchange="handleFileUpload(this, '${tableId}')">
                            <label for="fileInput-${tableId}" class="upload-btn">
                                Upload File
                            </label>
                            <div id="uploaded-files-${tableId}" class="uploaded-files"></div>
                        </div>
                    </td>
                    <td>
                        <button class="manage-btn" onclick="addName('${tableId}')">
                            <span>+</span>
                            Add Name
                        </button>
                    </td>
                    
                    <td>
                         <input type="file" id="fileInput-${tableId}" style="display:none" onchange="handleFileUpload(this, '${tableId}')">
                            <label for="fileInput-${tableId}" class="upload-btn">
                                Upload File
                            </label>
                            <div id="uploaded-files-${tableId}" class="uploaded-files"></div>
                    </td>

                    <td>
                        <button class="manage-btn" onclick="addName('${tableId}')">
                            <span>+</span>
                            Add Fee
                        </button>
                    </td>

                    <td>
                        <button class="manage-btn" onclick="addName('${tableId}')">
                            <span>+</span>
                            Add Name
                        </button>
                    </td>

                    <td>
                        <button class="manage-btn" onclick="addName('${tableId}')">
                            <span>+</span>
                            Add Name
                        </button>
                    </td>
                    <td>
                    <div class="table-cell">
                         <button class="manage-btn" onclick="addColumn()">Add Column</button>
                    </div>
                    </td>
                    <td>
                        <div class="checkbox-container">
                            <div class="checkbox" onclick="handleCheckbox(this, '${tableId}')"></div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
            `;
            
            container.insertAdjacentHTML('beforeend', tableHTML);
        }

        function handleFileUpload(input, tableId) {
            const uploadedFilesContainer = document.getElementById(`uploaded-files-${tableId}`);
            
            // Clear previous files
            uploadedFilesContainer.innerHTML = '';
            
            // Process each uploaded file
            for (let file of input.files) {
                const fileItem = document.createElement('div');
                fileItem.classList.add('file-item');
                
                // Create a view button for the file
                const viewBtn = document.createElement('button');
                viewBtn.textContent = 'View File';
                viewBtn.classList.add('view-btn');
                viewBtn.onclick = () => viewFile(file);
                
                // Display file name
                const fileName = document.createElement('span');
                // fileName.textContent = file.name;
                
                fileItem.appendChild(fileName);
                fileItem.appendChild(viewBtn);
                
                uploadedFilesContainer.appendChild(fileItem);
            }
        }

        function viewFile(file) {
            const viewer = document.getElementById('file-viewer');
            const viewerContent = document.getElementById('file-viewer-content');
            const overlay = document.getElementById('file-viewer-overlay');
            
            // Clear previous content
            viewerContent.innerHTML = '';
            
            // Determine file type and create appropriate viewer
            if (file.type.startsWith('image/')) {
                const img = document.createElement('img');
                img.src = URL.createObjectURL(file);
                img.onload = () => URL.revokeObjectURL(img.src);
                viewerContent.appendChild(img);
            } else if (file.type === 'application/pdf') {
                const iframe = document.createElement('iframe');
                iframe.src = URL.createObjectURL(file);
                iframe.width = '100%';
                iframe.height = '600px';
                iframe.onload = () => URL.revokeObjectURL(iframe.src);
                viewerContent.appendChild(iframe);
            } else {
                const msg = document.createElement('p');
                msg.textContent = 'This file type cannot be previewed.';
                viewerContent.appendChild(msg);
            }
            
            // Show viewer and overlay
            viewer.style.display = 'block';
            overlay.style.display = 'block';
        }

        function closeFileViewer() {
            const viewer = document.getElementById('file-viewer');
            const overlay = document.getElementById('file-viewer-overlay');
            
            viewer.style.display = 'none';
            overlay.style.display = 'none';
        }

        // Placeholder functions for other interactions
        function handleCheckbox(checkbox, tableId) {
            checkbox.classList.toggle('checked');
        }

        function manageDiscussion(tableId) {
            alert(`Managing discussion for ${tableId}`);
        }

        function addName(tableId) {
            alert(`Adding name for ${tableId}`);
        }

        function addColumn(tableId) {
            alert(`Adding column for ${tableId}`);
        }

        // Add initial table
        addNewTable();

        let currentCheckbox = null;

        function handleCheckbox(checkbox, tableId) {
            // If already checked, show toast
            if (checkbox.classList.contains('checked')) {
                showToast('Action already confirmed. No further changes allowed.');
                return;
            }

            // Store reference to current checkbox
            currentCheckbox = checkbox;

            // Show custom modal
            document.getElementById('confirmModal').style.display = 'block';
        }

        // Modal event listeners
        document.querySelector('.close-btn').addEventListener('click', closeModal);
        document.getElementById('cancelBtn').addEventListener('click', closeModal);
        document.getElementById('confirmBtn').addEventListener('click', confirmAction);

        function closeModal() {
            document.getElementById('confirmModal').style.display = 'none';
        }

        function confirmAction() {
            if (currentCheckbox) {
                currentCheckbox.classList.add('checked');
                closeModal();
            }
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.display = 'block';
            
            // Hide toast after 3 seconds
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }

        // Initial table
        addNewTable();



        window.addEventListener('scroll', function() {
            const button = document.querySelector('.add-table-button');
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (scrollTop > 20) {
                button.style.top = '20px';
                button.style.position = 'fixed';
            } else {
                button.style.top = '100px';
                button.style.position = 'fixed';
            }
        });
        function addColumn(tableId) {
    const nameModal = document.getElementById('nameModal');
    const nameInput = document.getElementById('nameInput');
    const nameError = document.getElementById('nameError');
    const nameSaveBtn = document.getElementById('nameSaveBtn');
    const closeBtn = document.querySelector('.name-close-btn');
    
    // Reset the input and error message
    nameInput.value = '';
    nameError.style.display = 'none';
    
    // Show the modal
    nameModal.style.display = 'block';
    
    // Function to handle column addition
    const handleSave = () => {
        const name = nameInput.value.trim();
        
        if (!name) {
            nameError.style.display = 'block';
            return;
        }
        
        const table = document.querySelector(`#${tableId} table`);
        const headerRow = table.querySelector('thead tr');
        const dataRow = table.querySelector('tbody tr');
        
        const newHeader = document.createElement('th');
        newHeader.textContent = name;
        
        const newCell = document.createElement('td');
        newCell.innerHTML = `
            <div class="checkbox-container" style="display: flex; flex-direction: column; align-items: center;">
                <div class="containers" style="display: flex; justify-content: center; margin-bottom: 5px; gap: 8px;">
                <div class="checkbox" onclick="handleCheckbox(this, '${tableId}')"></div>
                <div class="checkbox" onclick="handleCheckbox(this, '${tableId}')"></div>
                </div>
                <input type="file" id="fileInput-${Date.now()}" style="display:none">
                <label for="fileInput-${Date.now()}" class="upload-btn">Upload File</label>
            </div>
        `;

        const addColumnTh = headerRow.querySelector(`#dynamic-columns-${tableId}`);
        headerRow.insertBefore(newHeader, addColumnTh);
        dataRow.insertBefore(newCell, dataRow.querySelector('td:nth-last-child(2)'));
        
        // Close the modal
        nameModal.style.display = 'none';
        
        // Remove event listeners
        nameSaveBtn.removeEventListener('click', handleSave);
        closeBtn.removeEventListener('click', handleClose);
        window.removeEventListener('click', handleOutsideClick);
    };
    
    // Function to handle modal closing
    const handleClose = () => {
        nameModal.style.display = 'none';
        
        // Remove event listeners
        nameSaveBtn.removeEventListener('click', handleSave);
        closeBtn.removeEventListener('click', handleClose);
        window.removeEventListener('click', handleOutsideClick);
    };
    
    // Function to handle clicking outside the modal
    const handleOutsideClick = (event) => {
        if (event.target === nameModal) {
            handleClose();
        }
    };
    
    // Add event listeners
    nameSaveBtn.addEventListener('click', handleSave);
    closeBtn.addEventListener('click', handleClose);
    window.addEventListener('click', handleOutsideClick);
    
    // Handle Enter key press
    nameInput.addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            handleSave();
        }
    });
    
    // Clear error message when typing
    nameInput.addEventListener('input', () => {
        nameError.style.display = 'none';
    });
}

        const users = [
    { id: 1, name: 'Emma Davis', role: 'Project Lead' },
    { id: 2, name: 'Frank Miller', role: 'Business Analyst' },
    { id: 3, name: 'Grace Lee', role: 'Software Engineer' },
    { id: 4, name: 'Henry Wilson', role: 'Quality Assurance' },
    { id: 5, name: 'Ivy Chen', role: 'Data Scientist' },
    { id: 6, name: 'Jack Parker', role: 'UX Designer' }
];

let selectedUsers = new Set();
let currentTableId = null;

function getInitials(name) {
    return name.split(' ').map(n => n[0]).join('');
}

function getRandomColor() {
    const colors = ['#20B2AA', '#4682B4', '#6A5ACD', '#008080', '#2E8B57', '#4169E1'];
    return colors[Math.floor(Math.random() * colors.length)];
}

function renderUsers(usersToRender) {
    const usersList = document.getElementById('usersList');
    usersList.innerHTML = '';
    
    usersToRender.forEach(user => {
        const userItem = document.createElement('div');
        userItem.className = `user-item ${selectedUsers.has(user.id) ? 'selected' : ''}`;
        
        const initials = getInitials(user.name);
        userItem.innerHTML = `
            <div class="avatar" style="background-color: ${getRandomColor()}">${initials}</div>
            <div class="user-info">
                <div class="user-name">${user.name}</div>
                <div class="user-role">${user.role}</div>
            </div>
        `;
        
        userItem.onclick = () => toggleUser(user.id, userItem);
        usersList.appendChild(userItem);
    });
}

function showDiscussionModal(tableId) {
    currentTableId = tableId;
    const modal = document.getElementById('discussionModal');
    modal.style.display = 'block';
    renderUsers(users);
}

function toggleUser(userId, element) {
    if (selectedUsers.has(userId)) {
        selectedUsers.delete(userId);
        element.classList.remove('selected');
    } else {
        selectedUsers.add(userId);
        element.classList.add('selected');
    }
}

const searchInput = document.querySelector('.search-input');
searchInput.addEventListener('input', (e) => {
    const searchTerm = e.target.value.toLowerCase();
    const filteredUsers = users.filter(user => 
        user.name.toLowerCase().includes(searchTerm) || 
        user.role.toLowerCase().includes(searchTerm)
    );
    renderUsers(filteredUsers);
});

document.querySelector('.close-btn').onclick = () => {
    document.getElementById('discussionModal').style.display = 'none';
};

document.querySelector('.save-btn').onclick = () => {
    if (selectedUsers.size > 0) {
        const selectedNames = users
            .filter(user => selectedUsers.has(user.id))
            .map(user => user.name)
            .join(', ');
            
        const discussionCell = document.querySelector(`#${currentTableId} td:first-child`);
        discussionCell.innerHTML = `<div class="selected-participants">${selectedNames}</div>`;
        
        document.getElementById('discussionModal').style.display = 'none';
    }
};

function manageDiscussion(tableId) {
    showDiscussionModal(tableId);
}

window.onclick = (event) => {
    const modal = document.getElementById('discussionModal');
    if (event.target === modal) {
        modal.style.display = 'none';
    }
};

let currentNameTableId = null;
const usedNames = new Set();

function showNameModal(tableId) {
    currentNameTableId = tableId;
    const modal = document.getElementById('nameModal');
    const input = document.getElementById('nameInput');
    const error = document.getElementById('nameError');
    
    // Clear previous input and error
    input.value = '';
    error.style.display = 'none';
    
    modal.style.display = 'block';
    input.focus();
}

// Update the original addName function
function addName(tableId) {
    showNameModal(tableId);
}

// Close modal when clicking the close button
document.querySelector('.name-close-btn').onclick = () => {
    document.getElementById('nameModal').style.display = 'none';
};

// Close modal when clicking outside
window.onclick = (event) => {
    const modal = document.getElementById('nameModal');
    if (event.target === modal) {
        modal.style.display = 'none';
    }
};

// Handle name input and save
document.getElementById('nameSaveBtn').onclick = () => {
    const input = document.getElementById('nameInput');
    const error = document.getElementById('nameError');
    const name = input.value.trim();
    
    // Validate input
    if (name === '') {
        error.textContent = 'Please enter a name';
        error.style.display = 'block';
        return;
    }
    
    // Check for duplicate names
    if (usedNames.has(name.toLowerCase())) {
        error.textContent = 'This name is already in use';
        error.style.display = 'block';
        return;
    }
    
    // Save the name
    usedNames.add(name.toLowerCase());
    const cell = document.querySelector(`#${currentNameTableId} td:nth-child(3)`);
    cell.innerHTML = `<span class="saved-name">${name}</span>`;
    
    // Close modal
    document.getElementById('nameModal').style.display = 'none';
};

// Handle Enter key in input
document.getElementById('nameInput').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        document.getElementById('nameSaveBtn').click();
    }
});

// Clear error message when typing
document.getElementById('nameInput').addEventListener('input', () => {
    document.getElementById('nameError').style.display = 'none';
});

        window.addEventListener('scroll', function() {
            const button = document.querySelector('.add-table-button');
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (scrollTop > 20) {
                button.style.top = '20px';
                button.style.position = 'fixed';
            } else {
                button.style.top = '100px';
                button.style.position = 'fixed';
            }
        });
    </script>
</body>
</html>